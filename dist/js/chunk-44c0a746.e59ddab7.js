(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44c0a746"],{1102:function(t,e,a){},"15fd":function(t,e,a){"use strict";var c=a("d225"),n=a("b0b4"),r=a("308d"),s=a("6bb5"),i=a("4e2b"),o=a("9ab4"),u=a("60a3"),l=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.formItem={source:"",database:"",textarea:"",backup:1,text:"",idc:"",table:"",assigned:"",delay:null,tp:0,row:1,name:"",isquery:2,ip:"",add:"",username:"",password:"",port:"",id:0},t.wordList=[],t.page_number=1,t.current=1,t.find={picker:[],user:"",valve:!1},t.query={user:"",department:"",valve:!1,username:"",computer_room:"",connection_name:""},t.table_data=[],t.testResults=[],t.validate_gen=!0,t.loading=!1,t.is_open=!1,t.group_list=[],t.group_props=[],t.edit_password=!1,t.savePassLoading=!1,t}return Object(i["a"])(e,t),Object(n["a"])(e,[{key:"cancel_password",value:function(){this.edit_password=!1}}]),e}(u["d"]);l=Object(o["a"])([Object(u["a"])({components:{}})],l),e["a"]=l},"17d8":function(t,e,a){"use strict";var c=a("1102"),n=a.n(c);n.a},"4ff6":function(t,e,a){"use strict";var c=a("d225"),n=a("b0b4"),r=a("308d"),s=a("6bb5"),i=a("4e2b"),o=a("9ab4"),u=a("60a3"),l=a("bc3a"),f=a.n(l),d=a("15fd"),m=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.fetchData={idc:[],source:[],base:[],table:[],assigned:[]},t}return Object(i["a"])(e,t),Object(n["a"])(e,[{key:"fetchSource",value:function(t){var e=this;t&&f.a.get("".concat(this.$config.url,"/fetch/source/").concat(t,"/dml")).then(function(t){"dml"===t.data.x?(e.fetchData.source=t.data.source,e.fetchData.assigned=t.data.assigned):e.$config.notice("非法劫持参数！")}).catch(function(t){e.$config.err_notice(e,t)})}},{key:"fetchBase",value:function(t){var e=this;t&&f.a.get("".concat(this.$config.url,"/fetch/base/").concat(t)).then(function(t){e.fetchData.base=t.data}).catch(function(t){e.$config.err_notice(e,t)})}},{key:"fetchIDC",value:function(){var t=this;f.a.get("".concat(this.$config.url,"/fetch/idc")).then(function(e){t.fetchData.idc=e.data}).catch(function(e){t.$config.err_notice(t,e)})}},{key:"fetchTable",value:function(){var t=this;this.formItem.database&&f.a.put("".concat(this.$config.url,"/fetch/table"),{source:this.formItem.source,base:this.formItem.database}).then(function(e){t.fetchData.table=e.data.table,t.wordList=t.$config.concat(t.wordList,e.data.highlight)}).catch(function(e){t.$config.err_notice(t,e)})}}]),e}(Object(u["b"])(d["a"]));m=Object(o["a"])([Object(u["a"])({components:{}})],m),e["a"]=m},"9cf0":function(t,e,a){"use strict";a.r(e);var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Card",[a("div",{staticClass:"step-header-con"},[a("h3",[t._v(t._s(t.stepData.title))]),a("h5",[t._v(t._s(t.stepData.describe))])]),a("p",{staticClass:"step-content"}),a("Row",[a("i-col",{attrs:{span:"8"}},[a("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n            注意事项:\n            "),a("span",{attrs:{slot:"desc"},slot:"desc"},[t._v("\n            1.必须填写查询说明\n            "),a("br"),t._v("\n            2.根据查询条件预估所需的查询时间\n            "),a("br"),t._v("\n            3.所有提交的查询语句均会进行审计记录\n            "),a("br"),t._v("\n            4.仅支持查询语句,不可使用非查询语句\n            "),a("br"),t._v("\n            5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则以平台配置的Limit数为准\n          ")])])],1),a("i-col",{attrs:{span:"12"}},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.stepRules,"label-width":150}},[a("FormItem",{attrs:{label:"环境:",prop:"idc"}},[a("Select",{on:{"on-change":t.fetchSource},model:{value:t.formItem.idc,callback:function(e){t.$set(t.formItem,"idc",e)},expression:"formItem.idc"}},t._l(t.fetchData.idc,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),a("FormItem",{attrs:{label:"审核人:",prop:"assigned"}},[a("Select",{attrs:{filterable:""},model:{value:t.formItem.assigned,callback:function(e){t.$set(t.formItem,"assigned",e)},expression:"formItem.assigned"}},t._l(t.fetchData.assigned,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)],1),t.export_list?a("FormItem",{attrs:{label:"是否需要导出数据:",prop:"export"}},[a("RadioGroup",{model:{value:t.formItem.export,callback:function(e){t.$set(t.formItem,"export",e)},expression:"formItem.export"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1):t._e(),a("FormItem",{attrs:{label:"查询说明：",prop:"text"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请填写查询说明"},model:{value:t.formItem.text,callback:function(e){t.$set(t.formItem,"text",e)},expression:"formItem.text"}})],1),a("FormItem",{attrs:{label:""}},[a("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)],1),a("Steps",{staticStyle:{"margin-left":"10%"}},t._l(t.stepList1,function(t){return a("Step",{key:t.title,attrs:{title:t.title,content:t.describe}})}),1)],1)],1)],1)},n=[],r=a("d225"),s=a("b0b4"),i=a("308d"),o=a("6bb5"),u=a("4e2b"),l=a("9ab4"),f=a("bc3a"),d=a.n(f),m=a("4ff6"),p=a("60a3"),b=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(i["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.export_list=!1,t.stepData={title:"Yearning SQL查询系统",describe:"欢迎你！ ".concat(sessionStorage.getItem("user"))},t.stepList1=[{title:"提交",describe:"提交查询申请"},{title:"审核",describe:"等待审核结果"},{title:"查询",describe:"审核完毕，进入查询页面"}],t.stepRules={text:[{required:!0,message:"请填写查询说明",trigger:"blur"}],idc:[{required:!0,message:"环境地址不得为空",trigger:"change"}],source:[{required:!0,message:"连接名不得为空",trigger:"change"}],assigned:[{required:!0,message:"审核人不得为空",trigger:"change"}]},t.item={},t.formItem={text:"",idc:"",export:0,assigned:"",source:""},t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"fetchSource",value:function(t){var e=this;t&&d.a.get("".concat(this.$config.url,"/fetch/source/").concat(t,"/query")).then(function(t){"query"===t.data.x?e.fetchData.assigned=t.data.assigned:e.$config.notice("非法劫持参数！")}).catch(function(t){e.$config.err_notice(e,t)})}},{key:"handleSubmit",value:function(){var t=this,e=this.$refs["formItem"];e.validate(function(e){e&&d.a.post("".concat(t.$config.url,"/query/refer"),{idc:t.formItem.idc,source:t.formItem.source,export:t.formItem.export,assigned:t.formItem.assigned,text:t.formItem.text}).then(function(){t.$router.push({name:"query_apply"})}).catch(function(e){t.$config.err_notice(t,e)})})}},{key:"fetchQueryStatus",value:function(){var t=this;d.a.put("".concat(this.$config.url,"/query/status")).then(function(e){1===e.data.status?t.$router.push({name:"query_page"}):2===e.data.status?t.$router.push({name:"query_apply"}):(t.fetchIDC(),t.export_list=e.data.export)})}},{key:"mounted",value:function(){this.fetchQueryStatus()}}]),e}(Object(p["b"])(m["a"]));b=Object(l["a"])([Object(p["a"])({components:{}})],b);var h=b,g=h,v=(a("17d8"),a("2877")),_=Object(v["a"])(g,c,n,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-44c0a746.e59ddab7.js.map