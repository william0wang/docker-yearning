(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fc80200"],{"15fd":function(e,t,r){"use strict";var a=r("d225"),o=r("b0b4"),n=r("308d"),s=r("6bb5"),i=r("4e2b"),c=r("9ab4"),u=r("60a3"),l=function(e){function t(){var e;return Object(a["a"])(this,t),e=Object(n["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.formItem={source:"",database:"",textarea:"",backup:1,text:"",idc:"",table:"",assigned:"",delay:null,tp:0,row:1,name:"",isquery:2,ip:"",add:"",username:"",password:"",port:"",id:0},e.wordList=[],e.page_number=1,e.current=1,e.find={picker:[],user:"",valve:!1},e.query={user:"",department:"",valve:!1,username:"",computer_room:"",connection_name:""},e.table_data=[],e.testResults=[],e.validate_gen=!0,e.loading=!1,e.is_open=!1,e.group_list=[],e.group_props=[],e.edit_password=!1,e.savePassLoading=!1,e}return Object(i["a"])(t,e),Object(o["a"])(t,[{key:"cancel_password",value:function(){this.edit_password=!1}}]),t}(u["d"]);l=Object(c["a"])([Object(u["a"])({components:{}})],l),t["a"]=l},"2d79":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{attrs:{width:800,"z-index":9999},on:{"on-ok":e.is_post},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[r("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[e._v("用户权限")]),r("Form",{attrs:{"label-width":120,"label-position":"top"}},[r("FormItem",{attrs:{label:"用户名"}},[r("Input",{attrs:{readonly:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.is_admin,expression:"is_admin"}],attrs:{label:"权限组"}},[r("Select",{attrs:{clearable:"",multiple:"",filterable:""},on:{"on-change":e.marge_group},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.group_list,function(e){return r("Option",{key:e.Name,attrs:{value:e.Name,label:e.Name}})}),1)],1),[r("FormItem",{attrs:{label:"DDL及索引权限:"}},["1"===e.permission.ddl?r("Tag",{attrs:{color:"success"}},[e._v("是")]):r("Tag",{attrs:{color:"volcano"}},[e._v("否")])],1),"1"===e.permission.ddl?[r("FormItem",{attrs:{label:"数据源:"}},e._l(e.permission.ddl_source,function(t){return r("Tag",{key:t,attrs:{color:"purple"}},[e._v(" "+e._s(t))])}),1)]:e._e(),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),r("br"),r("FormItem",{attrs:{label:"DML权限:"}},["1"===e.permission.dml?r("Tag",{attrs:{color:"success"}},[e._v("是")]):r("Tag",{attrs:{color:"volcano"}},[e._v("否")])],1),"1"===e.permission.dml?[r("FormItem",{attrs:{label:"数据源:"}},e._l(e.permission.dml_source,function(t){return r("Tag",{key:t,attrs:{color:"geekblue"}},[e._v(" "+e._s(t))])}),1)]:e._e(),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),r("br"),r("FormItem",{attrs:{label:"数据查询权限:"}},["1"===e.permission.query?r("Tag",{attrs:{color:"success"}},[e._v("是")]):r("Tag",{attrs:{color:"volcano"}},[e._v("否")])],1),"1"===e.permission.query?[r("FormItem",{attrs:{label:"数据源:"}},e._l(e.permission.query_source,function(t){return r("Tag",{key:t,attrs:{color:"blue"}},[e._v(" "+e._s(t))])}),1)]:e._e(),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),r("br"),r("FormItem",{attrs:{label:"选择上级审核人:"}},e._l(e.permission.auditor,function(t){return r("Tag",{key:t,attrs:{color:"cyan"}},[e._v(" "+e._s(t))])}),1)],r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),r("br"),r("FormItem",{attrs:{label:"用户管理权限:"}},["1"===e.permission.user?r("Tag",{attrs:{color:"success"}},[e._v("是")]):r("Tag",{attrs:{color:"volcano"}},[e._v("否")])],1),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),r("br"),r("FormItem",{attrs:{label:"数据库管理权限:"}},["1"===e.permission.base?r("Tag",{attrs:{color:"success"}},[e._v("是")]):r("Tag",{attrs:{color:"volcano"}},[e._v("否")])],1)],2)],1)},o=[],n=r("bc3a"),s=r.n(n),i={name:"edit_rule",props:{is_open:Boolean,username:String,is_admin:Boolean,group_list:Array,group_props:Array},data:function(){return{permission:{ddl:"0",ddl_source:[],dml:"0",dml_source:[],query:"0",query_source:[],user:"0",base:"0",auditor:[]},post_group:[]}},computed:{open:{get:function(){return this.is_open},set:function(){this.$emit("cancel")}},group:{get:function(){return this.group_props},set:function(e){this.post_group=e}}},methods:{is_post:function(){var e=this;this.is_admin&&s.a.post("".concat(this.$config.url,"/group/update"),{username:this.username,permission:this.permission,group:this.post_group}).then(function(t){e.$config.notice(t.data),e.$emit("success")}).catch(function(t){e.$config.err_notice(e,t)})},marge_group:function(e){var t=this,r=[];null!==e&&(r=e),s.a.post("".concat(this.$config.url,"/fetch/marge"),{user:this.username,group:r}).then(function(e){t.permission=e.data}).catch(function(e){return t.$config.err_notice(t,e)})}}},c=i,u=r("2877"),l=Object(u["a"])(c,a,o,!1,null,"3721c2b8",null);t["a"]=l.exports},"4a4d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Row",[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"ios-crop"}}),e._v("\n        用户权限\n      ")],1),r("div",[r("Input",{staticClass:"margin-left-10",staticStyle:{width:"15%"},attrs:{placeholder:"请填写用户名",clearable:""},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}}),r("Button",{staticClass:"margin-left-10",attrs:{type:"success"},on:{click:e.queryData}},[e._v("查询")]),r("Button",{staticClass:"margin-left-10",attrs:{type:"warning"},on:{click:e.queryCancel}},[e._v("重置")]),r("br"),r("br"),r("Table",{attrs:{border:"",columns:e.columns,data:e.table_data,stripe:"",height:"550"},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.row;return[r("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(t){return e.edit_rule(a)}}},[e._v("\n              查看与编辑\n            ")])]}}])})],1),r("br"),r("Page",{attrs:{total:e.page_number,"show-elevator":"","page-size":10,current:e.current},on:{"on-change":e.current_page,"update:current":function(t){e.current=t}}})],1)],1),r("edit_rule",{attrs:{is_admin:"",is_open:e.is_open,username:e.rule_form.username,group_list:e.group_list,group_props:e.rule_form.group},on:{cancel:e.cancel,success:e.post_ok}})],1)},o=[],n=r("d225"),s=r("b0b4"),i=r("308d"),c=r("6bb5"),u=r("4e2b"),l=r("9ab4"),p=r("bc3a"),d=r.n(p),m=r("2d79"),_=r("60a3"),b=r("15fd"),g=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(i["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.columns=[{title:"ID",key:"ID",width:85,sortable:!0},{title:"用户名",key:"Username",sortable:!0},{title:"操作",key:"action",align:"center",slot:"action"}],e.rule_form={username:"",group:[]},e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"edit_rule",value:function(e){this.rule_form={username:e.Username,group:e.Group},this.is_open=!0}},{key:"current_page",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;d.a.get("".concat(this.$config.url,"/group?page=").concat(t,"&con=").concat(JSON.stringify(this.query))).then(function(t){e.table_data=t.data.data,e.group_list=t.data.group_list,e.page_number=parseInt(t.data.page)}).catch(function(t){e.$config.err_notice(e,t)})}},{key:"queryData",value:function(){this.query.valve=!0,this.current_page()}},{key:"queryCancel",value:function(){this.$config.clearObj(this.formItem),this.current_page()}},{key:"cancel",value:function(){this.is_open=!1,this.rule_form.group=[]}},{key:"post_ok",value:function(){this.current_page(this.current)}},{key:"mounted",value:function(){this.current_page()}}]),t}(Object(_["b"])(b["a"]));g=Object(l["a"])([Object(_["a"])({components:{edit_rule:m["a"]}})],g);var h=g,f=h,v=(r("7dfa"),r("2877")),y=Object(v["a"])(f,a,o,!1,null,"7c0ba40f",null);t["default"]=y.exports},"7bc0":function(e,t,r){},"7dfa":function(e,t,r){"use strict";var a=r("7bc0"),o=r.n(a);o.a}}]);
//# sourceMappingURL=chunk-7fc80200.ba83663a.js.map