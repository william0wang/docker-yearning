(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16a02a98"],{1059:function(t,e,a){},"15fd":function(t,e,a){"use strict";var s=a("d225"),o=a("b0b4"),r=a("308d"),l=a("6bb5"),n=a("4e2b"),i=a("9ab4"),c=a("60a3"),u=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(r["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.formItem={source:"",database:"",textarea:"",backup:1,text:"",idc:"",table:"",assigned:"",delay:null,tp:0,row:1,name:"",isquery:2,ip:"",add:"",username:"",password:"",port:"",id:0},t.wordList=[],t.page_number=1,t.current=1,t.find={picker:[],user:"",valve:!1},t.query={user:"",department:"",valve:!1,username:"",computer_room:"",connection_name:""},t.table_data=[],t.testResults=[],t.validate_gen=!0,t.loading=!1,t.is_open=!1,t.group_list=[],t.group_props=[],t.edit_password=!1,t.savePassLoading=!1,t}return Object(n["a"])(e,t),Object(o["a"])(e,[{key:"cancel_password",value:function(){this.edit_password=!1}}]),e}(c["d"]);u=Object(i["a"])([Object(c["a"])({components:{}})],u),e["a"]=u},c64d:function(t,e,a){"use strict";var s=a("1059"),o=a.n(s);o.a},cbde:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-settings"}}),t._v("\n                    基础设置\n                ")],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("消息推送")]),a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"webhook地址:"}},[a("Input",{attrs:{placeholder:"支持钉钉/企业微信(赞助版本) webhook机器人"},model:{value:t.message.web_hook,callback:function(e){t.$set(t.message,"web_hook",e)},expression:"message.web_hook"}})],1),a("FormItem",{attrs:{label:"邮件SMTP服务地址:"}},[a("Input",{attrs:{placeholder:"STMP服务 地址"},model:{value:t.message.host,callback:function(e){t.$set(t.message,"host",e)},expression:"message.host"}})],1),a("FormItem",[a("Checkbox",{model:{value:t.message.ssl,callback:function(e){t.$set(t.message,"ssl",e)},expression:"message.ssl"}},[t._v("启用ssl端口")])],1),a("FormItem",{attrs:{label:"SMTP服务端口:"}},[a("InputNumber",{model:{value:t.message.port,callback:function(e){t.$set(t.message,"port",e)},expression:"message.port"}})],1),a("FormItem",{attrs:{label:"邮件推送人用户名:"}},[a("Input",{attrs:{placeholder:"推送人 用户名"},model:{value:t.message.user,callback:function(e){t.$set(t.message,"user",e)},expression:"message.user"}})],1),a("FormItem",{attrs:{label:"邮件推送人密码:"}},[a("Input",{attrs:{placeholder:"推送人 密码",type:"password"},model:{value:t.message.password,callback:function(e){t.$set(t.message,"password",e)},expression:"message.password"}})],1),a("FormItem",{attrs:{label:"邮件测试收件地址::"}},[a("Input",{attrs:{placeholder:"测试收件人地址填写"},model:{value:t.message.to_user,callback:function(e){t.$set(t.message,"to_user",e)},expression:"message.to_user"}})],1),a("Form-item",{attrs:{label:"email推送开关:"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.message.mail,callback:function(e){t.$set(t.message,"mail",e)},expression:"message.mail"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),a("Form-item",{attrs:{label:"webhook推送开关:"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.message.ding,callback:function(e){t.$set(t.message,"ding",e)},expression:"message.ding"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.dingding_test()}}},[t._v("hook测试")]),a("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning"},on:{click:function(e){return t.mail_test()}}},[t._v("邮件测试")])],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Card",{staticStyle:{"margin-left":"5%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("LDAP设置")]),a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"服务地址url"}},[a("Input",{attrs:{placeholder:"[ip地址或者域名]:[端口号]"},model:{value:t.ldap.url,callback:function(e){t.$set(t.ldap,"url",e)},expression:"ldap.url"}})],1),a("FormItem",[a("Checkbox",{model:{value:t.ldap.ldaps,callback:function(e){t.$set(t.ldap,"ldaps",e)},expression:"ldap.ldaps"}},[t._v("启用ldaps")])],1),a("FormItem",{attrs:{label:"LDAP管理员DN:"}},[a("Input",{attrs:{placeholder:"请填写管理员DN"},model:{value:t.ldap.user,callback:function(e){t.$set(t.ldap,"user",e)},expression:"ldap.user"}})],1),a("FormItem",{attrs:{label:"LDAP管理员密码:"}},[a("Input",{attrs:{placeholder:"请填写管理员密码",type:"password"},model:{value:t.ldap.password,callback:function(e){t.$set(t.ldap,"password",e)},expression:"ldap.password"}})],1),a("FormItem",{attrs:{label:"LDAP_Search filter:"}},[a("Select",{model:{value:t.ldap.type,callback:function(e){t.$set(t.ldap,"type",e)},expression:"ldap.type"}},[a("Option",{attrs:{value:1}},[t._v("sAMAccountName")]),a("Option",{attrs:{value:2}},[t._v("uid")]),a("Option",{attrs:{value:3}},[t._v("cn")])],1)],1),a("FormItem",{attrs:{label:"LDAP_SCBASE:"}},[a("Input",{attrs:{placeholder:"LDAP Search Base"},model:{value:t.ldap.sc,callback:function(e){t.$set(t.ldap,"sc",e)},expression:"ldap.sc"}})],1),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.ldap_test()}}},[t._v("ldap测试")])],1)],1),a("br"),a("Alert",{staticStyle:{"margin-left":"5%"},attrs:{type:"info","show-icon":""}},[t._v("\n                            注意事项：\n                            "),a("template",{slot:"desc"},[t._v("\n                                1.LDAP登录用户名，必须全局唯一。ldap配置请参考Grafana。\n                                "),a("br"),t._v("\n                                2.由于各个邮件服务提供商对于垃圾邮件过滤的机制各不相同，可能会造成邮件无法接收的情况。所以使用前请测试是否稳定。对于使用了ssl安全协议的stmp连接需勾选启动ssl端口复选框\n                                "),a("br"),t._v("\n                                3.只有开启相应的消息推送开关后，消息推送才会开启。\n                                "),a("br")])],2)],1)],1)],1)],1)],1),a("br"),a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"android-settings"}}),t._v("\n                    进阶设置\n                ")],1),a("Row",[a("Col",{attrs:{span:"12"}},[a("Card",{staticStyle:{"margin-left":"5%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("其他")]),a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"查询最大Limit限制:"}},[a("Input",{attrs:{placeholder:"查询最大的Limit数。"},model:{value:t.other.limit,callback:function(e){t.$set(t.other,"limit",e)},expression:"other.limit"}})],1),a("FormItem",{attrs:{label:"自定义环境:"}},[t._l(t.other.idc,function(e){return a("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose2}},[t._v(t._s(e)+"\n                                    ")])}),a("br"),a("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"环境名称"},model:{value:t.other.foce,callback:function(e){t.$set(t.other,"foce",e)},expression:"other.foce"}}),a("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd}},[t._v("\n                                        添加环境\n                                    ")])],2),a("FormItem",{attrs:{label:"排除数据库:"}},[t._l(t.other.exclude_db_list,function(e){return a("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose_exclued_db}},[t._v(t._s(e)+"\n                                    ")])}),a("br"),a("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"排除数据库"},model:{value:t.other.exclued_db,callback:function(e){t.$set(t.other,"exclued_db",e)},expression:"other.exclued_db"}}),a("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd_exclued_db}},[t._v("添加排除数据库\n                                    ")])],2),a("FormItem",{attrs:{label:"脱敏字段:"}},[t._l(t.other.insulate_word_list,function(e){return a("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose3}},[t._v(t._s(e)+"\n                                    ")])}),a("br"),a("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"脱敏字段设置"},model:{value:t.other.sensitive,callback:function(e){t.$set(t.other,"sensitive",e)},expression:"other.sensitive"}}),a("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd1}},[t._v("\n                                        添加脱敏字段\n                                    ")])],2),a("Row",[a("Col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"多级审核:"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.other.multi,callback:function(e){t.$set(t.other,"multi",e)},expression:"other.multi"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),a("Col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"查询审核:"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.other.query,callback:function(e){t.$set(t.other,"query",e)},expression:"other.query"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),a("Col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"查询超时时间:"}},[a("InputNumber",{attrs:{max:600,min:1,formatter:function(t){return t+"秒"}},model:{value:t.other.query_timeout,callback:function(e){t.$set(t.other,"query_timeout",e)},expression:"other.query_timeout"}})],1)],1)],1),a("Row",[a("Col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"注册:"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.other.register,callback:function(e){t.$set(t.other,"register",e)},expression:"other.register"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),a("Col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"查询导出:"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.other.export,callback:function(e){t.$set(t.other,"export",e)},expression:"other.export"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),a("Col",{attrs:{span:"6"}},[a("Form-item",{attrs:{label:"查询时限:"}},[a("InputNumber",{attrs:{max:600,min:0,formatter:function(t){return t+"分钟"}},model:{value:t.other.ex_query_time,callback:function(e){t.$set(t.other,"ex_query_time",e)},expression:"other.ex_query_time"}})],1)],1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Card",{staticStyle:{"margin-left":"5%"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("超级管理员特权")]),a("Form",{attrs:{"label-width":160}},[a("FormItem",{attrs:{label:"删除指定日期前的工单记录"}},[a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间点",editable:!1},on:{"on-change":function(e){t.other.overdue=e}},model:{value:t.other.overdue,callback:function(e){t.$set(t.other,"overdue",e)},expression:"other.overdue"}}),a("Poptip",{attrs:{confirm:"",title:"确定要删除工单记录吗?"},on:{"on-ok":t.del_order}},[a("Button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary"}},[t._v("删除")])],1)],1),a("FormItem",{attrs:{label:"删除指定日期前的查询记录"}},[a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间点",editable:!1},on:{"on-change":function(e){t.other.query_expire=e}},model:{value:t.other.query_expire,callback:function(e){t.$set(t.other,"query_expire",e)},expression:"other.query_expire"}}),a("Poptip",{attrs:{confirm:"",title:"确定要删除查询记录吗?"},on:{"on-ok":t.del_query}},[a("Button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary"}},[t._v("删除")])],1)],1)],1)],1)],1),a("br"),a("Alert",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning","show-icon":""}},[t._v("\n                            注意事项：\n                            "),a("template",{slot:"desc"},[t._v("\n                                1.设置最大Limit数后，所有的查询语句的查询结果都不会超过这个数值。\n                                "),a("br"),t._v("\n                                2.开启多级审核开关后,用户组将新增执行人角色，只有执行人角色的用户才能最终执行工单。关闭后执行人角色用户将全部更改为使用者\n                                "),a("br"),t._v("\n                                3.查询审核开关开启后，所有的查询都必须通过管理员同意才能进行。关闭则可自主查询\n                                "),a("br"),t._v("\n                                4.设置脱敏字段后，查询时如匹配到对应字段则该字段将只会以******显示\n                            ")])],2),a("Button",{staticStyle:{"margin-left":"5%",width:"95%"},attrs:{type:"primary"},on:{click:t.save_upload}},[t._v("保存")])],1)],1)],1)],1)],1)],1)},o=[],r=(a("ac4d"),a("8a81"),a("ac6a"),a("d225")),l=a("b0b4"),n=a("308d"),i=a("6bb5"),c=a("4e2b"),u=a("9ab4"),d=a("bc3a"),p=a.n(d),h=a("60a3"),m=a("15fd"),b=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(n["a"])(this,Object(i["a"])(e).apply(this,arguments)),t.ldap={},t.message={push_type:!1},t.other={limit:0,per_order:0},t}return Object(c["a"])(e,t),Object(l["a"])(e,[{key:"del_order",value:function(){var t=this;p.a.post("".concat(this.$config.url,"/group/setting/del/order"),{date:this.other.overdue}).then(function(e){return t.$config.notice(e.data)}).catch(function(e){return t.$config.err_notice(t,e)})}},{key:"del_query",value:function(){var t=this;p.a.post("".concat(this.$config.url,"/group/setting/del/query"),{date:this.other.query_expire}).then(function(e){return t.$config.notice(e.data)}).catch(function(e){return t.$config.err_notice(t,e)})}},{key:"handleAdd",value:function(){var t=!0,e=!1,a=void 0;try{for(var s,o=this.other.idc[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value;if(r===this.other.foce)return void this.$Message.error("请勿添加相同环境！")}}catch(l){e=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(e)throw a}}this.other.idc.push(this.other.foce),this.other.foce=""}},{key:"handleAdd1",value:function(){var t=!0,e=!1,a=void 0;try{for(var s,o=this.other.insulate_word_list[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value;if(r===this.other.sensitive)return void this.$Message.error("请勿添加相同脱敏字段！")}}catch(l){e=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(e)throw a}}this.other.insulate_word_list.push(this.other.sensitive),this.other.sensitive=""}},{key:"handleAdd_exclued_db",value:function(){var t=!0,e=!1,a=void 0;try{for(var s,o=this.other.exclude_db_list[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var r=s.value;if(r===this.other.exclued_db)return void this.$Message.error("请勿添加相同数据库！")}}catch(l){e=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(e)throw a}}this.other.exclude_db_list.push(this.other.exclued_db),this.other.exclued_db=""}},{key:"handleClose2",value:function(t,e){var a=this.other.idc.indexOf(e);this.other.idc.splice(a,1)}},{key:"handleClose3",value:function(t,e){var a=this.other.insulate_word_list.indexOf(e);this.other.insulate_word_list.splice(a,1)}},{key:"handleClose_exclued_db",value:function(t,e){var a=this.other.exclude_db_list.indexOf(e);this.other.exclude_db_list.splice(a,1)}},{key:"ldap_test",value:function(){var t=this;p.a.put("".concat(this.$config.url,"/group/setting/test/ldap"),{ldap:this.ldap}).then(function(e){t.$config.notice(e.data)}).catch(function(e){t.$config.err_notice(t,e)})}},{key:"dingding_test",value:function(){var t=this;p.a.put("".concat(this.$config.url,"/group/setting/test/ding"),{mail:this.message}).then(function(e){t.$config.notice(e.data)}).catch(function(e){t.$config.err_notice(t,e)})}},{key:"mail_test",value:function(){var t=this;p.a.put("".concat(this.$config.url,"/group/setting/test/mail"),{mail:this.message}).then(function(e){t.$config.notice(e.data)}).catch(function(e){t.$config.err_notice(t,e)})}},{key:"save_upload",value:function(){var t=this;p.a.post("".concat(this.$config.url,"/group/setting/add"),{ldap:this.ldap,message:this.message,other:this.other}).then(function(e){t.$config.notice(e.data)}).catch(function(e){t.$config.err_notice(t,e)})}},{key:"mounted",value:function(){var t=this;p.a.get("".concat(this.$config.url,"/group/setting")).then(function(e){t.message=e.data.Message,t.other=e.data.Other,t.ldap=e.data.Ldap}).catch(function(e){t.$config.err_notice(t,e)})}}]),e}(Object(h["b"])(m["a"]));b=Object(u["a"])([h["a"]],b);var f=b,v=f,_=(a("c64d"),a("2877")),g=Object(_["a"])(v,s,o,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-16a02a98.8ee4b139.js.map